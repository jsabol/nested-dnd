var pack = {
	"name": "dnd",
	"version": "0.0.0",
	"description": "",
	"author": "Cattegy",
	"dependencies": [
		"nested-dnd-data"
	],
	"defaultSeed": "Great Wheel",
	"tables": {
		"ELEMENTS": [
			"air",
			"earth",
			"fire",
			"water"
		],
		"COLORS": [
			"silver",
			"silver",
			"red",
			"orange",
			"yellow",
			"green",
			"blue",
			"black"
		],
		"PLANET PREFIX": [
			"Kry",
			"Tor",
			"Ath",
			"Eb",
			"Aeb",
			"Myst",
			"Col",
			"And",
			"Kar",
			"Chan",
			"Gly",
			"Kul",
			"Raen",
			"Ed",
			"Gni",
			"Con",
			"Gin",
			"Bor",
			"Ter",
			"Plu",
			"Jup",
			"Merc",
			"Ven",
			"Tar",
			"Tur"
		],
		"PLANET SUFFIX": [
			"ril",
			"nei",
			"pri",
			"ill",
			"atha",
			"sel",
			"ka",
			"en",
			"ra",
			"la",
			"myth",
			"lyn",
			"ion",
			"ynn",
			"to",
			"iter",
			"us",
			"ury",
			"lea",
			"nov",
			"omia",
			"tera",
			"ilia"
		]
	},
	"things": {
		"tavern": {
			"isa": "shop"
		},
		"region": {
			"icon": [
				"fa flaticon-map",
				"fa flaticon-map-1",
				"fa flaticon-map-2",
				"fa flaticon-map-3"
			],
			"background": "#87CEEB",
			"textColor": "DarkGreen"
		},
		"city district": {
			"icon": "fa flaticon-suburb"
		},
		"continent": {
			"icon": [
				"fa flaticon-australia-map",
				"fa flaticon-africa-map",
				"fa flaticon-south-america"
			],
			"background": "#87CEEB",
			"textColor": "DarkGreen"
		},
		"village": {
			"icon": "fa flaticon-suburb"
		},
		"city": {
			"icon": "fa flaticon-castle"
		},
		"kingdom": {
			"icon": "fa flaticon-castle"
		},
		"monument": {
			"icon": [
				"gi gi-water-fountain",
				"gi gi-ionic-column"
			]
		},
		"castle": {
			"icon": "fa flaticon-castle"
		},
		"battlefield": {
			"icon": "gi gi-bloody-sword",
			"background": "darkred"
		},
		"cave": {
			"icon": "gi gi-mountain-cave",
			"background": "saddlebrown"
		},
		"beach": {
			"icon": "fa flaticon-palm-trees",
			"background": "navajowhite",
			"textColor": "darkblue"
		},
		"house": {
			"icon": "gi gi-house"
		},
		"bed": {
			"icon": "gi gi-bed"
		},
		"farm": {
			"icon": "fa flaticon-hay-rolls",
			"background": "wheat"
		},
		"cemetery": {
			"icon": "gi gi-graveyard",
			"background": "gray"
		},
		"grave": {
			"icon": "gi gi-pirate-grave"
		},
		"library": {
			"icon": "gi gi-bookshelf"
		},
		"diamond": {
			"icon": "gi gi-cut-diamond"
		},
		"bones": {
			"icon": "gi gi-jawbone",
			"background": "oldlace"
		},
		"shirt": {
			"icon": "gi gi-shirt"
		},
		"hat": {
			"icon": "gi gi-robin-hood-hat"
		},
		"campfire": {
			"icon": "gi gi-campfire"
		},
		"shop": {
			"icon": "gi gi-shop"
		},
		"forest": {
			"icon": [
				"fa flaticon-forest",
				"fa flaticon-nature-2"
			],
			"background": "LIGHTGREEN"
		},
		"mountain": {
			"icon": [
				"fa flaticon-hills",
				"gi gi-mountain-cave",
				"gi gi-mountains",
				"gi gi-mountaintop"
			],
			"background": "saddlebrown"
		},
		"temple": {
			"icon": "gi gi-church"
		},
		"sling": {
			"icon": "gi gi-slingshot"
		},
		"sack": {
			"icon": "gi gi-knapsack"
		},
		"bucket": {
			"icon": "fa fa-bitbucket"
		},
		"pole": {
			"icon": "gi gi-fishing-pole"
		},
		"armor": {
			"icon": "gi gi-armor-vest"
		},
		"ring": {
			"icon": [
				"gi gi-diamond-ring",
				"gi gi-ring"
			]
		},
		"potion": {
			"icon": [
				"gi gi-magic-potion",
				"gi gi-potion-ball",
				"gi gi-standing-potion"
			]
		},
		"scroll": {
			"icon": [
				"gi gi-scroll-unfurled",
				"gi gi-tied-scroll"
			]
		},
		"smithy": {
			"icon": "gi gi-sword-smithing"
		},
		"sword": {
			"icon": [
				"gi gi-croc-sword",
				"gi gi-energy-sword",
				"gi gi-fragmented-sword",
				"gi gi-rune-sword",
				"gi gi-shard-sword",
				"gi gi-shining-sword",
				"gi gi-spinning-sword",
				"gi gi-sword-array",
				"gi gi-sword-spade",
				"gi gi-sword-spin",
				"gi gi-winged-sword",
				"gi gi-zeus-sword"
			]
		},
		"whip": {
			"icon": "gi gi-whip"
		},
		"wave": {
			"icon": [
				"gi gi-wave-strike"
			]
		},
		"wand": {
			"icon": [
				"gi gi-lunar-wand",
				"gi gi-crystal-wand",
				"gi gi-fairy-wand",
				"gi gi-orb-wand"
			]
		},
		"vial": {
			"icon": "gi gi-vial"
		},
		"totem": {
			"icon": [
				"gi gi-totem",
				"gi gi-snake-totem",
				"gi gi-totem-head"
			]
		},
		"trident": {
			"icon": [
				"gi gi-magic-trident",
				"gi gi-harpoon-trident",
				"gi gi-trident"
			]
		},
		"torch": {
			"icon": "gi gi-torch"
		},
		"staff": {
			"icon": "gi gi-wizard-staff"
		},
		"spyglass": {
			"icon": "gi gi-spyglass"
		},
		"spear": {
			"icon": [
				"gi gi-spear-feather",
				"gi gi-stone-spear"
			]
		},
		"soap": {
			"icon": "gi-bubbles"
		},
		"sickle": {
			"icon": [
				"gi gi-sickle"
			]
		},
		"shield": {
			"icon": [
				"gi gi-american-shield",
				"gi gi-attached-shield",
				"gi gi-roman-shield",
				"gi gi-templar-shield",
				"gi gi-viking-shield",
				"gi gi-bordered-shield",
				"gi gi-broken-shield",
				"gi gi-checked-shield",
				"gi gi-cracked-shield",
				"gi gi-crenulated-shield",
				"gi gi-edged-shield",
				"gi gi-eye-shield",
				"gi gi-fire-shield",
				"gi gi-ice-shield",
				"gi gi-lightning-shield",
				"gi gi-magic-shield",
				"gi gi-rosa-shield",
				"gi gi-skull-shield",
				"gi gi-slashed-shield",
				"gi gi-winged-shield",
				"gi gi-zebra-shield",
				"gi gi-shield",
				"gi gi-round-shield",
				"fa fa-shield"
			]
		},
		"quiver": {
			"icon": "gi gi-quiver"
		},
		"perfume": {
			"icon": "gi gi-perfume-bottle"
		},
		"paper": {
			"icon": "gi gi-folded-paper"
		},
		"orb": {
			"icon": "gi gi-orb-wand"
		},
		"oil": {
			"icon": "fa fa-tint"
		},
		"net": {
			"icon": "gi gi-fishing-net"
		},
		"lyre": {
			"icon": "gi gi-lyre"
		},
		"manacles": {
			"icon": "gi gi-manacles"
		},
		"mace": {
			"icon": [
				"gi gi-flanged-mace",
				"gi gi-spiked-mace"
			]
		},
		"lock": {
			"icon": [
				"fa fa-lock"
			]
		},
		"lamp": {
			"icon": "gi-lantern-flame"
		},
		"ladder": {
			"icon": [
				"gi gi-ladder"
			]
		},
		"jug": {
			"icon": "gi gi-jug"
		},
		"ink": {
			"icon": [
				"gi gi-quill-ink"
			]
		},
		"hourglass": {
			"icon": [
				"gi gi-empty-hourglass",
				"gi gi-hourglass"
			]
		},
		"horn": {
			"icon": "gi gi-hunting-horn"
		},
		"hammer": {
			"icon": "gi gi-stake-hammer"
		},
		"halberd": {
			"icon": [
				"gi gi-sharp-halberd",
				"gi gi-halberd"
			]
		},
		"dagger": {
			"icon": [
				"gi gi-broad-dagger",
				"gi gi-plain-dagger",
				"gi gi-sacrificial-dagger"
			]
		},
		"flute": {
			"icon": "gi gi-pan-flute"
		},
		"flask": {
			"icon": [
				"gi gi-bubbling-flask",
				"gi gi-fizzing-flask",
				"gi gi-round-bottom-flask",
				"fa fa-flask"
			]
		},
		"emblem": {
			"icon": "gi gi-condor-emblem"
		},
		"drum": {
			"icon": "gi-music-spell"
		},
		"crystal": {
			"icon": "gi gi-floating-crystal"
		},
		"crowbar": {
			"icon": "gi gi-crowbar"
		},
		"club": {
			"icon": [
				"gi gi-wood-club"
			]
		},
		"chest": {
			"icon": [
				"gi gi-chest",
				"gi gi-locked-chest",
				"gi gi-open-chest"
			]
		},
		"chain": {
			"icon": "fa fa-chain"
		},
		"candle": {
			"icon": [
				"gi gi-candle-flame",
				"gi gi-candle-holder",
				"gi gi-candle-light"
			]
		},
		"breastplate": {
			"icon": "gi gi-breastplate"
		},
		"bell": {
			"icon": [
				"gi gi-ringing-bell",
				"fa fa-bell",
				"fa fa-bell-o"
			]
		},
		"basket": {
			"icon": "fa fa-shopping-basket"
		},
		"barrel": {
			"icon": "gi gi-barrel"
		},
		"backpack": {
			"icon": "gi gi-backpack"
		},
		"arrows": {
			"icon": "gi gi-target-arrows"
		},
		"acid": {
			"icon": "gi gi-acid"
		},
		"tome of clear thought": {
			"icon": "gi gi-book-cover"
		},
		"book": {
			"icon": [
				"gi gi-book-cover",
				"gi gi-evil-book",
				"gi gi-open-book",
				"gi gi-black-book",
				"gi gi-white-book",
				"fa fa-book"
			]
		},
		"medallion of thoughts": {
			"icon": "gi-necklace"
		},
		"dragon scale mail": {
			"icon": "gi-spiked-armor"
		},
		"dragon slayer": {
			"icon": "gi-winged-sword"
		},
		"orb of dragonkind": {
			"icon": [
				"gi-orb-wand"
			]
		},
		"dragon": {
			"icon": [
				"gi gi-dragon-head",
				"gi gi-double-dragon"
			]
		},
		"monster": {
			"icon": "gi gi-monster-grasp"
		},
		"assassin": {
			"icon": "gi gi-assassin-pocket"
		},
		"bat": {
			"icon": [
				"gi gi-bat",
				"gi gi-bat-wing",
				"gi gi-evil-bat"
			]
		},
		"boar": {
			"icon": "gi gi-boar-tusks"
		},
		"camel": {
			"icon": "gi gi-camel-head"
		},
		"cat": {
			"icon": [
				"gi gi-black-cat",
				"gi gi-white-cat"
			]
		},
		"crab": {
			"icon": [
				"gi gi-crab-claw",
				"gi gi-crab",
				"gi gi-sad-crab"
			]
		},
		"cultist": {
			"icon": "gi gi-cultist"
		},
		"eagle": {
			"icon": "gi gi-eagle-emblem"
		},
		"elephant": {
			"icon": "gi gi-elephant-head"
		},
		"frog": {
			"icon": "gi gi-frog"
		},
		"ghost": {
			"icon": "gi gi-ghost"
		},
		"harpy": {
			"icon": "gi gi-harpy"
		},
		"hydra": {
			"icon": "gi gi-hydra"
		},
		"imp": {
			"icon": [
				"gi gi-imp-laugh",
				"gi gi-imp"
			]
		},
		"knight": {
			"icon": [
				"gi gi-black-knight-helm",
				"gi gi-mounted-knight"
			]
		},
		"lion": {
			"icon": "gi gi-lion"
		},
		"lizard": {
			"icon": "gi gi-lizard-tongue"
		},
		"minotaur": {
			"icon": "gi gi-minotaur"
		},
		"octopus": {
			"icon": "gi gi-octopus"
		},
		"owl": {
			"icon": "gi gi-owl"
		},
		"orc": {
			"icon": "gi gi-orc-head"
		},
		"pegasus": {
			"icon": "gi gi-pegasus"
		},
		"raven": {
			"icon": "gi gi-raven"
		},
		"rhinoceros": {
			"icon": "gi gi-rhinoceros-horn"
		},
		"salamander": {
			"icon": "gi gi-salamander"
		},
		"scorpion": {
			"icon": [
				"gi gi-scorpion-tail",
				"gi gi-scorpion"
			]
		},
		"shadow": {
			"icon": [
				"gi gi-shadow-follower",
				"gi gi-two-shadows"
			]
		},
		"skeleton": {
			"icon": "gi-skeletal-hand"
		},
		"solar": {
			"icon": "gi gi-solar-system"
		},
		"spider": {
			"icon": [
				"gi gi-spider-alt",
				"gi gi-spider-face",
				"gi gi-spider-bot",
				"gi gi-angular-spider",
				"gi gi-hanging-spider",
				"gi gi-masked-spider",
				"gi gi-spider-web"
			]
		},
		"spy": {
			"icon": "gi gi-lock-spy"
		},
		"tiger": {
			"icon": "gi gi-tiger"
		},
		"troll": {
			"icon": "gi gi-troll"
		},
		"unicorn": {
			"icon": "gi gi-unicorn"
		},
		"vulture": {
			"icon": "gi gi-vulture"
		},
		"wolf": {
			"icon": [
				"gi gi-wolf-head",
				"gi gi-wolf-howl"
			]
		},
		"wyvern": {
			"icon": "gi gi-wyvern"
		},
		"zombie": {
			"icon": [
				"gi gi-shambling-zombie",
				"gi gi-raise-zombie"
			]
		},
		"beast": {
			"icon": "gi gi-beast-eye"
		},
		"plant": {
			"icon": "gi gi-carnivorous-plant"
		},
		"adult black dragon": {
			"isa": "dragon"
		},
		"adult brass dragon": {
			"isa": "dragon"
		},
		"adult bronze dragon": {
			"isa": "dragon"
		},
		"adult blue dragon": {
			"isa": "dragon"
		},
		"adult gold dragon": {
			"isa": "dragon"
		},
		"adult copper dragon": {
			"isa": "dragon"
		},
		"adult green dragon": {
			"isa": "dragon"
		},
		"adult red dragon": {
			"isa": "dragon"
		},
		"adult white dragon": {
			"isa": "dragon"
		},
		"adult silver dragon": {
			"isa": "dragon"
		},
		"ancient black dragon": {
			"isa": "dragon"
		},
		"ancient blue dragon": {
			"isa": "dragon"
		},
		"ancient gold dragon": {
			"isa": "dragon"
		},
		"ancient brass dragon": {
			"isa": "dragon"
		},
		"ancient bronze dragon": {
			"isa": "dragon"
		},
		"ancient copper dragon": {
			"isa": "dragon"
		},
		"ancient green dragon": {
			"isa": "dragon"
		},
		"ancient red dragon": {
			"isa": "dragon"
		},
		"ancient silver dragon": {
			"isa": "dragon"
		},
		"ancient white dragon": {
			"isa": "dragon"
		},
		"black dragon wyrmling": {
			"icon": [
				"gi gi-dragon-head",
				"gi gi-double-dragon"
			]
		},
		"blue dragon wyrmling": {
			"icon": [
				"gi gi-dragon-head",
				"gi gi-double-dragon"
			]
		},
		"brass dragon wyrmling": {
			"icon": [
				"gi gi-dragon-head",
				"gi gi-double-dragon"
			]
		},
		"bronze dragon wyrmling": {
			"icon": [
				"gi gi-dragon-head",
				"gi gi-double-dragon"
			]
		},
		"copper dragon wyrmling": {
			"icon": [
				"gi gi-dragon-head",
				"gi gi-double-dragon"
			]
		},
		"dragon turtle": {
			"icon": [
				"gi gi-dragon-head",
				"gi gi-double-dragon"
			]
		},
		"gold dragon wyrmling": {
			"icon": [
				"gi gi-dragon-head",
				"gi gi-double-dragon"
			]
		},
		"green dragon wyrmling": {
			"icon": [
				"gi gi-dragon-head",
				"gi gi-double-dragon"
			]
		},
		"half-red dragon veteran": {
			"icon": [
				"gi gi-dragon-head",
				"gi gi-double-dragon"
			]
		},
		"pseudodragon": {
			"icon": [
				"gi gi-dragon-head",
				"gi gi-double-dragon"
			]
		},
		"red dragon wyrmling": {
			"icon": [
				"gi gi-dragon-head",
				"gi gi-double-dragon"
			]
		},
		"silver dragon wyrmling": {
			"icon": [
				"gi gi-dragon-head",
				"gi gi-double-dragon"
			]
		},
		"white dragon wyrmling": {
			"icon": [
				"gi gi-dragon-head",
				"gi gi-double-dragon"
			]
		},
		"young brass dragon": {
			"isa": "dragon"
		},
		"young blue dragon": {
			"isa": "dragon"
		},
		"young black dragon": {
			"isa": "dragon"
		},
		"young bronze dragon": {
			"isa": "dragon"
		},
		"young copper dragon": {
			"isa": "dragon"
		},
		"young gold dragon": {
			"isa": "dragon"
		},
		"young red dragon": {
			"isa": "dragon"
		},
		"young green dragon": {
			"isa": "dragon"
		},
		"young silver dragon": {
			"isa": "dragon"
		},
		"young white dragon": {
			"isa": "dragon"
		},
		"ape": {
			"icon": "gi gi-monkey"
		},
		"guard": {
			"icon": [
				"gi gi-guards",
				"gi gi-guarded-tower"
			]
		},
		"rat": {
			"icon": "gi-mouse"
		},
		"cosmology": {
			"background": "wheat"
		},
		"material plane": {
			"contains": [
				"crystal sphere,1-5"
			],
			"icon": "fa flaticon-nature-4",
			"background": "black",
			"textColor": "white"
		},
		"air plane": {
			"contains": [
				"citadel,0-3",
				"gaseous bubble,3-7",
				"floating liquid sphere,3-7",
				"asteroid,0-2"
			],
			"icon": "gi gi-fluffy-cloud",
			"background": "aliceBlue"
		},
		"mirror plane": {
			"contains": [
				"fake"
			]
		},
		"earth plane": {
			"contains": [
				"mountain,1-6",
				"wizard tower,0-3",
				"mine,0-3",
				"city,2-5",
				"town,2-5"
			],
			"icon": "gi gi-rock",
			"background": "sienna"
		},
		"fire plane": {
			"contains": [
				"tower,1-10",
				"city,1-2",
				"volcano,1-3",
				"castle,1-2",
				"palace,2-3"
			],
			"icon": "gi gi-flamed-leaf gi-rotate-45",
			"background": "darkRed"
		},
		"water plane": {
			"contains": [
				"ocean",
				"tower,1-10",
				"city,1-2",
				"castle,1-2",
				"palace,2-3"
			],
			"icon": "gi gi-at-sea",
			"background": "darkblue"
		},
		"Astral Plane": {
			"contains": [
				"silver astral pool",
				".astral color pool,3-10"
			],
			"background": "rainbow",
			"icon": "gi gi-circle-claws"
		},
		"celestial plane": {
			"contains": [
				"citadel,1-3",
				"palace,1-3",
				"temple,1-5"
			],
			"icon": "fa flaticon-religion-cross",
			"background": "gold"
		},
		"fiendish plane": {
			"contains": [
				"hostile citadel,1-3",
				"hostile palace,1-3",
				"hostile temple,1-5"
			],
			"background": "darkred",
			"icon": "gi gi-daemon-skull"
		},
		"undead mirror plane": {
			"isa": "mirror plane",
			"background": "gray",
			"textColor": null
		},
		"abyssal plane": {
			"contains": [
				"hostile citadel,1-3",
				"hostile palace,1-3",
				"hostile temple,1-5"
			],
			"icon": "fa flaticon-black-hole fa-spin",
			"background": "black"
		},
		"fey plane": [
			"citadel,1-3",
			"palace,1-3",
			"temple,1-5"
		],
		"fey mirror plane": {
			"isa": "mirror plane",
			"background": "lavenderblush",
			"textColor": "purple"
		},
		"astral color pool": [
			"*COLORS*| astral pool"
		],
		"silver astral pool": {
			"namegen": "silver astral pool (portal to material plane)"
		},
		"crystal sphere": {
			"contains": [
				"star",
				"star,3%",
				"planet,2-5"
			],
			"namegen": "*PLANET PREFIX*|*PLANET SUFFIX*|space",
			"background": "black",
			"textColor": "mediumpurple",
			"icon": "gi gi-crystal-shine pulse animated infinite"
		},
		"star": {
			"icon": "fa flaticon-sun fa-spin",
			"background": "black",
			"textColor": "gold"
		},
		"gas giant": {
			"icon": "fa flaticon-moon",
			"background": "black",
			"textColor": "papayawhip"
		},
		"moon": {
			"icon": "fa flaticon-big-moon fa-spin",
			"background": "black"
		},
		"barren planet": {
			"icon": "fa flaticon-big-moon",
			"background": "black"
		},
		"planet": {
			"contains": [
				"continent,1-5",
				"underdark,90%"
			],
			"icon": [
				"fa fa-globe fa-spin",
				"gi gi-earth-asia-oceania gi-spin",
				"gi gi-earth-africa-europe gi-spin",
				"gi gi-earth-america gi-spin"
			],
			"background": "black",
			"textColor": "DodgerBlue"
		},
		"gaseous bubble": {
			"namegen": "*COLORS*| gaseous bubble"
		},
		"Great Wheel": {
			"contains": [
				"Prime Material Plane",
				"Mirror Planes",
				"Transitive Planes",
				"Inner Planes",
				"Outer Planes"
			],
			"isa": "cosmology"
		},
		"World Axis": {
			"contains": [
				"Prime Material Plane",
				"Shadowfell",
				"Feywild",
				"Astral Sea",
				"Elemental Chaos"
			],
			"isa": "cosmology"
		},
		"World Tree": {
			"contains": [
				"Prime Material Plane",
				"Inner Planes",
				"Coterminous Planes",
				"Outer Planes (Tree)",
				"Cynosure",
				"Fugue Plane"
			],
			"isa": "cosmology"
		},
		"Inner Planes": {
			"contains": [
				"Elemental Plane of Air",
				"Elemental Plane of Earth",
				"Elemental Plane of Fire",
				"Elemental Plane of Water",
				"Positive Energy Plane",
				"Negative Energy Plane"
			],
			"icon": "gi gi-at-sea",
			"background": "wheat"
		},
		"Outer Planes": {
			"contains": [
				"The Abyss",
				"Acheron",
				"Arcadia",
				"Concordant Opposition/Outlands",
				"Elysium",
				"Gehenna",
				"Gladsheim/Ysgard",
				"Hades/The Gray Waste",
				"Happy Hunting Grounds/Beastlands",
				"Limbo",
				"The Nine Hells",
				"Nirvana/Mechanus",
				"Arvandor",
				"Pandemonium",
				"Seven Heavens/Mount Celestia",
				"Tarterus/Carceri",
				"Twin Paradises/Bytopia"
			],
			"icon": "gi gi-cartwheel",
			"background": "wheat"
		},
		"Outer Planes (Tree)": {
			"contains": [
				"Celestial Planes",
				"Fiendish Planes",
				"Neutral Planes"
			],
			"namegen": "Outer Planes",
			"icon": "gi gi-tree-branch",
			"background": "wheat"
		},
		"Astral Sea": [
			"Acheron",
			"Arcadia",
			"Concordant Opposition/Outlands",
			"Elysium",
			"Gehenna",
			"Gladsheim/Ysgard",
			"Hades/The Gray Waste",
			"Happy Hunting Grounds/Beastlands",
			"The Nine Hells",
			"Nirvana/Mechanus",
			"Arvandor",
			"Pandemonium",
			"Seven Heavens/Mount Celestia",
			"Tarterus/Carceri",
			"Twin Paradises/Bytopia"
		],
		"Coterminous Planes": [
			"Ethereal Plane",
			"Astral Plane",
			"Plane of Shadow"
		],
		"Elemental Chaos": [
			".Inner Planes",
			"Limbo",
			"The Abyss"
		],
		"Mirror Planes": {
			"contains": [
				"Shadowfell",
				"Feywild"
			],
			"icon": "fa flaticon-nature-4 fa-rotate-90",
			"background": "white",
			"textColor": "black"
		},
		"Transitive Planes": {
			"contains": [
				"Ethereal Plane",
				"Astral Plane"
			],
			"background": "wheat",
			"icon": "gi gi-dust-cloud"
		},
		"Celestial Planes": {
			"contains": [
				"Arvandor",
				"Brightwater",
				"Dwarfhome",
				"Dweomerheart",
				"The Gates of the Moon",
				"Golden Hills",
				"Green Fields",
				"The House of Knowledge",
				"The House of the Triad"
			],
			"background": "gold",
			"icon": "gi gi-hand-of-god"
		},
		"Fiendish Planes": [
			"River of Blood",
			"The Abyss",
			"The Barrens of Doom and Despair",
			"Blood Rift",
			"Clangor",
			"Deep Caverns",
			"The Demonweb Pits",
			"Fated Depths",
			"Fury's Heart",
			"Hammergrim",
			"The Nine Hells",
			"Nishrek",
			"The Supreme Throne"
		],
		"Neutral Planes": [
			"Dragon Eyrie",
			"Heliopolis",
			"House of Nature",
			"Jotunheim",
			"Warrior's Rest"
		],
		"ethereal plane": {
			"icon": "gi gi-cloud-ring gi-spin",
			"background": "whitesmoke"
		},
		"Ethereal Plane": {
			"isa": "ethereal plane",
			"contains": [
				"Border Ethereal",
				"Deep Ethereal",
				"Ravenloft"
			]
		},
		"Border Ethereal": {
			"isa": "ethereal plane",
			"contains": [
				{
					"namegen": "Prime Material Plane",
					"isa": "ethereal mirror plane",
					"data": {
						"mirrors": "Prime Material Plane"
					},
					"icon": "fa flaticon-nature-4 fa-rotate-90"
				},
				{
					"namegen": "Inner Planes",
					"isa": "ethereal mirror plane",
					"data": {
						"mirrors": "Inner Planes"
					},
					"icon": "gi gi-at-sea"
				}
			]
		},
		"ethereal mirror plane": {
			"isa": "mirror plane",
			"background": "whitesmoke",
			"textColor": null
		},
		"The Abyss": {
			"isa": "abyssal plane"
		},
		"Limbo": {
			"contains": [
				"*RANDOM*"
			],
			"icon": "gi gi-time-trap",
			"background": "gray"
		},
		"Prime Material Plane": {
			"isa": "material plane",
			"contains": [
				"crystal sphere,1-5"
			]
		},
		"Elemental Plane of Air": {
			"isa": "air plane",
			"contains": [
				"Borealis",
				"Citadel of Ice and Steel",
				"Taifun: Palace of Tempests",
				"Elemental Foundation of Air",
				"."
			]
		},
		"Elemental Plane of Water": {
			"isa": "water plane",
			"contains": [
				"Elemental Foundation of Water"
			]
		},
		"Elemental Plane of Earth": {
			"isa": "earth plane",
			"contains": [
				"The Great Dismal Delve",
				"The Sevenfold Mazework",
				"The Pale River",
				"The Iron Crucible",
				"The Aviary",
				"Elemental Foundation of Earth"
			]
		},
		"Elemental Plane of Fire": {
			"isa": "fire plane",
			"contains": [
				"City of Brass",
				"Elemental Foundation of Fire"
			]
		},
		"Positive Energy Plane": {
			"icon": "fa fa-plus",
			"background": "lightgreen"
		},
		"Negative Energy Plane": {
			"icon": "fa fa-minus",
			"background": "gray"
		},
		"Arvandor": {
			"isa": "celestial plane",
			"namegen": "Arvandor (also known as Arborea or Olympus)"
		},
		"Shadowfell": {
			"isa": "undead mirror plane",
			"data": {
				"mirrors": "Prime Material Plane"
			},
			"icon": "fa flaticon-nature-4 fa-rotate-90"
		},
		"Plane of Shadow": {
			"isa": "Shadowfell"
		},
		"Feywild": {
			"isa": "fey mirror plane",
			"data": {
				"mirrors": "Prime Material Plane"
			},
			"icon": "fa flaticon-nature-4 fa-rotate-90"
		},
		"Ravenloft": {
			"contains": [
				"Barovia",
				".demiplane"
			],
			"namegen": "Demiplane of Dread (Ravenloft)"
		},
		"Seven Heavens/Mount Celestia": {
			"isa": "celestial plane"
		},
		"Brightwater": {
			"isa": "celestial plane"
		},
		"Dwarfhome": {
			"isa": "celestial plane"
		},
		"Dweomerheart": {
			"isa": "celestial plane"
		},
		"Gladsheim/Ysgard": {
			"isa": "celestial plane"
		},
		"The Gates of the Moon": {
			"isa": "celestial plane"
		},
		"Golden Hills": {
			"isa": "celestial plane"
		},
		"Green Fields": {
			"isa": "celestial plane"
		},
		"The House of Knowledge": {
			"isa": "celestial plane"
		},
		"The House of the Triad": {
			"isa": "celestial plane"
		},
		"Arcadia": {
			"isa": "celestial plane"
		},
		"Twin Paradises/Bytopia": {
			"isa": "celestial plane"
		},
		"Elysium": {
			"isa": "celestial plane"
		},
		"Happy Hunting Grounds/Beastlands": {
			"isa": "celestial plane"
		},
		"River of Blood": {
			"isa": "fiendish plane"
		},
		"The Barrens of Doom and Despair": {
			"isa": "fiendish plane"
		},
		"Blood Rift": {
			"isa": "fiendish plane"
		},
		"Deep Caverns": {
			"isa": "fiendish plane"
		},
		"Clangor": {
			"isa": "fiendish plane"
		},
		"The Demonweb Pits": {
			"isa": "fiendish plane"
		},
		"Fated Depths": {
			"isa": "fiendish plane"
		},
		"Fury's Heart": {
			"isa": "fiendish plane"
		},
		"Hammergrim": {
			"isa": "fiendish plane"
		},
		"The Nine Hells": {
			"isa": "fiendish plane"
		},
		"Nishrek": {
			"isa": "fiendish plane"
		},
		"The Supreme Throne": {
			"isa": "fiendish plane"
		},
		"Acheron": {
			"isa": "fiendish plane"
		},
		"Concordant Opposition/Outlands": {
			"isa": "fiendish plane"
		},
		"Gehenna": {
			"isa": "fiendish plane"
		},
		"Hades/The Gray Waste": {
			"isa": "fiendish plane",
			"background": "gray"
		},
		"Nirvana/Mechanus": {
			"isa": "fiendish plane"
		},
		"Pandemonium": {
			"isa": "fiendish plane"
		},
		"Tarterus/Carceri": {
			"isa": "fiendish plane"
		},
		"The Iron Crucible": {
			"namegen": "The Iron Crucible: portal to |*ELEMENTS*| plane"
		},
		"The Pale River": {
			"namegen": "The Pale River: portal to |*ELEMENTS*| plane"
		},
		"The Great Dismal Delve": [
			"The Sevenfold Mazework",
			".continent"
		],
		"The Aviary": [
			".cavern"
		],
		"fire weapon": {
			"background": "firebrick",
			"icon": [
				"gi gi-flaming-arrow"
			]
		},
		"adamantine armor": {
			"isa": "armor"
		},
		"acid weapon": {
			"icon": [
				"gi gi-acid"
			],
			"background": "limegreen"
		},
		"ammunition": {
			"icon": [
				"gi gi-quiver"
			]
		},
		"amulet": {
			"icon": [
				"gi gi-gem-necklace",
				"gi gi-necklace"
			],
			"background": "indigo",
			"textColor": "gold"
		},
		"amulet of health": {
			"isa": "amulet"
		},
		"amulet of proof against detection and location": {
			"isa": "amulet"
		},
		"amulet of the planes": {
			"isa": "amulet"
		},
		"breastplate +1": {
			"isa": "breastplate"
		},
		"breastplate +2": {
			"isa": "breastplate"
		},
		"breastplate +3": {
			"isa": "breastplate"
		},
		"breastplate of acid resistance": {
			"isa": "breastplate"
		},
		"breastplate of cold resistance": {
			"isa": "breastplate"
		},
		"breastplate of fire resistance": {
			"isa": "breastplate"
		},
		"breastplate of force resistance": {
			"isa": "breastplate"
		},
		"breastplate of lightning resistance": {
			"isa": "breastplate"
		},
		"breastplate of necrotic resistance": {
			"isa": "breastplate"
		},
		"breastplate of poison resistance": {
			"isa": "breastplate"
		},
		"breastplate of psychic resistance": {
			"isa": "breastplate"
		},
		"breastplate of radiant resistance": {
			"isa": "breastplate"
		},
		"boots": {
			"icon": [
				"gi gi-boots",
				"gi gi-steeltoe-boots",
				"gi gi-walking-boot"
			],
			"background": "tan",
			"textColor": "saddlebrown"
		},
		"bracers": {},
		"block and tackle": {
			"icon": [
				"gi gi-rope-coil"
			],
			"background": "khaki"
		},
		"bludgeoning weapon": {
			"icon": [
				"gi gi-flanged-mace",
				"gi gi-mace-head",
				"gi gi-wood-club",
				"gi gi-spiked-mace",
				"gi gi-hammer-drop"
			]
		},
		"bowl of commanding water elementals": {
			"icon": [
				"gi gi-water-splash"
			]
		},
		"boots of elvenkind": {
			"isa": "boots"
		},
		"boots of levitation": {
			"isa": "boots"
		},
		"boots of speed": {
			"isa": "boots"
		},
		"boots of striding and springing": {
			"isa": "boots"
		},
		"boots of the winterlands": {
			"isa": "boots"
		}
	}
};

function createMirrorPlane(instance, name){
	var instanceStore = instance.instanceStore;
	var thingStore = instance.thing.thingStore;
	var thing = thingStore.get(name);

	instance.children.forEach(function(child){
		if(typeof child !== "number") return;
		child = instanceStore.get(child);
		child.background = thing.background;
		child.textColor = thing.textColor;
		if(child.cssClass.indexOf(thing.background) === -1)
			child.cssClass+=" "+thing.background;
		if(child.data.mirrors !== undefined && instanceStore.get(child.data.mirrors).thing.contains){
			child.thing = styleAThing(child.thing,name);
		}
	});
}

function styleAThing(thing, styleName){
	var prefix = styleName.split(" ")[0]+" ";
	if(thing.isa && thing.isa.startsWith(styleName)){
		return thing;
	}
	var thingStore = thing.thingStore;

	var originalThing = thing.name;
	if(!originalThing) originalThing = "";
	if(thingStore.exists(prefix+originalThing)){
		return thingStore.get(prefix+originalThing);
	}

	thing = thingStore.add({
		"name": prefix+originalThing,
		"isa": originalThing
	});
	thing.isa = styleName;

	return thing;
}

pack.things["mirror plane"].beforeRender = function(instance){
	if(typeof instance.data.mirrors === "undefined") return;

	var instanceStore = instance.instanceStore;
	var thingStore = instance.thing.thingStore;

	if(typeof instance.data.mirrors === "string"){
		var index = thingStore.get(instance.data.mirrors).uniqueInstance;
		if(typeof index==='number'){
			instance.data.mirrors = index;
		}else return;
	}

	var mirrorInstance = instanceStore.get(instance.data.mirrors);
	if(!mirrorInstance.grown) 
		mirrorInstance.grow();

	if(instance.data.mirrorChildrenCopy === JSON.stringify(mirrorInstance.children)){
		return;
	}

	//TODO: copy contents of children and transform
	instance.children = [];
	mirrorInstance.children.forEach(function(mirrorChild){
		if(typeof mirrorChild==="number"){
			mirrorChild = instanceStore.get(mirrorChild);

			//create a new mirror plane thing
			var mirrorThing = mirrorChild.thing;
			var childThing = styleAThing(mirrorChild.thing,"mirror plane");

			//create new child and copy mirror
			var child = instanceStore.add(childThing);
			var newId = child.id;
			Object.assign(child,mirrorChild);
			child.id = newId;
			child.parent = instance.id;
			child.thing = childThing;
			child.data.mirrors = mirrorChild.id;

			instance.children.push(child.id);
		}
		if(typeof mirrorChild==="string"){
			instance.children.push(mirrorChild);
		}
	});

	instance.data.mirrorChildrenCopy = JSON.stringify(mirrorInstance.children);
}


pack.things["undead mirror plane"].beforeRender = function(instance){
	createMirrorPlane(instance, "undead mirror plane");
};

pack.things["fey mirror plane"].beforeRender = function(instance){
	createMirrorPlane(instance, "fey mirror plane");
};

pack.things["ethereal mirror plane"].beforeRender = function(i){
	createMirrorPlane(i,"ethereal mirror plane");
};

module.exports = pack;